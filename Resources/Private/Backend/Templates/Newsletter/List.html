<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/ViewHelpers"
			data-namespace-typo3-fluid="true">
<f:layout name="Backend"/>

<f:section name="content">
			<f:render section="Newsletters" arguments="{_all}"/>
</f:section>


<f:section name="Newsletters">
	<f:if condition="{newsletters}">
		<div class="row">
			<div class="col-md-12">
				<f:link.action action="new" class="btn btn-lg btn-primary" style="width: 250px; margin-bottom: 20px;">
					<f:translate key="module.newsletter.new.title" extensionName="CuteMailing">Add newsletter</f:translate>
				</f:link.action>
			</div>
		</div>
	</f:if>

	<div class="row">
		<div class="col-md-12">
			<h1>
				<f:translate key="module.newsletter.list.title" extensionName="CuteMailing">Newsletters</f:translate>
			</h1>
			<f:render partial="Miscellaneous/FlashMessages" arguments="{_all}"/>
			<f:if condition="{newsletters}">
				<f:then>
					<table class="table table-striped table-condensed">
						<thead>
						<tr>
							<th>#</th>
							<th><f:translate key="module.newsletter.list.tableheader.title" extensionName="CuteMailing">Newsletter title</f:translate></th>
							<th><f:translate key="module.newsletter.list.tableheader.description" extensionName="CuteMailing">Description</f:translate></th>
							<th><f:translate key="module.newsletter.list.tableheader.sendingTime" extensionName="CuteMailing">Sending time</f:translate></th>
							<th></th>
						</tr>
						</thead>
						<tbody>
						<f:for each="{newsletters}" as="newsletter" iteration="iteration">
							<tr>
								<td>{iteration.cycle}.</td>
								<td>
									<f:if condition="{newsletter.enabled}">
										<f:then>
											<i class="fa fa-play color-cute" title="Newsletter enabled"></i>
										</f:then>
										<f:else>
											<i class="fa fa-stop color-grey" title="Newsletter disabled"></i>
										</f:else>
									</f:if>
									<span title="UID{newsletter.uid}">{newsletter.title}</span>
								</td>
								<td><span title="{newsletter.description}"><f:format.crop maxCharacters="200" append=" ...">{newsletter.description}</f:format.crop></span></td>
								<td>{newsletter.sendingTime -> f:format.date(format: 'Y-m-d H:i')}</td>
								<td>
									<f:if condition="{newsletter.enabled}">
										<f:then>
											<f:comment><!-- @ToDo -- enabled geht hier noch nicht als status --></f:comment>
											<f:translate key="module.newsletter.list.enabled" extensionName="CuteMailing">enabled</f:translate>
											<f:comment>
												<!-- We do not want to disable anymore -->
												<f:link.action action="disable" class="btn btn-warning" arguments="{newsletter:newsletter}">
													<f:translate key="module.newsletter.list.disable" extensionName="CuteMailing">disable</f:translate>
												</f:link.action>
											</f:comment>
										</f:then>
										<f:else>
											<f:link.action action="enable" class="btn btn-primary" arguments="{newsletter:newsletter}" additionalAttributes="{data-luxletter-confirm:'{f:translate(key:\'module.newsletter.list.enableConfirm\',extensionName:\'CuteMailing\')}'}">
												<i class="fa fa-send"></i>
												<f:translate key="module.newsletter.list.enable" extensionName="CuteMailing">enable</f:translate>
											</f:link.action>
										</f:else>
									</f:if>
									<f:link.action action="sendTestMail" class="btn btn-primary" arguments="{newsletter:newsletter}">
										<i class="fa fa-flask"></i>
										<f:translate key="module.newsletter.list.test" extensionName="CuteMailing">Send test mail</f:translate>
									</f:link.action>
									<f:link.action action="edit" class="btn btn-primary" arguments="{newsletter:newsletter}">
										<i class="fa fa-edit"></i>
										<f:translate key="module.newsletter.list.edit" extensionName="CuteMailing">edit</f:translate>
									</f:link.action>
									<f:link.action action="delete" class="btn btn-danger" arguments="{newsletter:newsletter}" additionalAttributes="{data-luxletter-confirm:'{f:translate(key:\'module.newsletter.list.deleteConfirm\',extensionName:\'CuteMailing\')}'}">
										<i class="fa fa-close"></i>
										<f:translate key="module.newsletter.list.delete" extensionName="CuteMailing">delete</f:translate>
									</f:link.action>
								</td>
							</tr>
						</f:for>
						</tbody>
					</table>
				</f:then>
				<f:else>
					<div class="lux-workflow-new"></div>
					<f:link.action action="new" class="btn btn-lg-extra btn-primary btn-primary-extra">
						<span><f:translate key="module.newsletter.list.createnew.1" extensionName="CuteMailing">No newsletters yet</f:translate></span>
						<f:translate key="module.newsletter.list.createnew.2" extensionName="CuteMailing">Add a new one</f:translate>
					</f:link.action>
				</f:else>
			</f:if>

		</div>
	</div>
</f:section>
